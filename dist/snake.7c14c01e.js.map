{"version":3,"sources":["js/snake.js","node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["SNAKE","window","eventContainer","addEventListener","e","console","log","data","method","control","dispatchEvent","KeyboardEvent","keyCode","start","document","querySelector","restart","style","display","click","theme","JSON","parse","root","setProperty","outlineColor","backgroundColor","themeColor1","themeColor2","titleColor","obj","event","funct","evtCapturing","attachEvent","removeEventListener","detachEvent","Snake","instanceNumber","blockPool","SnakeBlock","elm","elmStyle","row","col","xPos","yPos","next","prev","getNextHighestZIndex","myObj","highestIndex","currentIndex","ii","currentStyle","parseFloat","getComputedStyle","defaultView","getPropertyValue","isNaN","config","playingBoard","localStorage","jsSnakeHighScore","undefined","setItem","me","myId","growthIncr","lastMove","preMove","isFirstMove","isFirstGameMove","currentDirection","columnShift","rowShift","xPosShift","yPosShift","snakeSpeed","isDead","isPaused","setModeListener","mode","speed","getElementById","modeDropdown","evt","val","target","parseInt","value","setTimeout","focus","snakeBody","startRow","startCol","getBlockWidth","getBlockHeight","createSnakeElement","getBoardContainer","appendChild","left","top","snakeLength","snakeHead","snakeTail","className","replace","id","tempNode","createElement","width","height","createBlocks","num","tempBlock","cloneNode","length","recordScore","highScore","alert","handleEndCondition","handleFunc","zIndex","setPaused","getPaused","handleArrowKeys","keyNum","premoveOnPause","directionFound","Math","abs","go","oldHead","newHead","grid","handleDeath","getGridFoodValue","eatFood","handleWin","blocks","splice","index","prevNode","foodEaten","selectDropDown","selectedOption","options","selectedIndex","text","localeCompare","selectedSpeed","rebirth","reset","curNode","nextNode","push","concat","Food","getRandomPosition","x","y","floor","random","fRow","fColumn","elmFood","setAttribute","getFoodElement","randomlyPlaceFood","numTries","maxRows","maxCols","Board","getClientWidth","myWidth","innerWidth","documentElement","clientWidth","clientHeight","body","getClientHeight","myHeight","innerHeight","inputConfig","MAX_BOARD_COLS","MAX_BOARD_ROWS","blockWidth","blockHeight","GRID_FOOD_VALUE","myFood","mySnake","boardState","myKeyListener","elmContainer","elmPlayingField","elmAboutPanel","elmLengthPanel","elmHighscorePanel","elmWelcome","elmTryAgain","elmWin","elmPauseScreen","createBoardElements","innerHTML","createWelcomeElement","createTryAgainElement","createWinElement","cancelBubble","stopPropagation","preventDefault","maxBoardWidth","maxBoardHeight","tmpElm","welcomeTxt","fullScreenText","fullScreen","welcomeStart","createTextNode","loadGame","kbShortcut","setBoardState","which","createGameEndElement","message","elmId","elmClassName","gameEndTxt","gameEndStart","reloadGame","resetBoard","kbGameEndShortcut","elmDialog","max","tmp","removeChild","setupPlayingField","getBoardState","state","getPlayingFieldElement","setBoardContainer","myContainer","cWidth","cHeight","cTop","cLeft","wEdgeSpace","fWidth","min","hEdgeSpace","fHeight","bottomPanelHeight","pLabelTop","round","numBoardCols","numBoardRows","boardContainer","OVERLAY_ID","OldModule","module","bundle","Module","moduleName","call","hot","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","type","handled","assets","forEach","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","every","generated","js","clear","hmrApply","v","hmrAcceptRun","reload","close","onclose","removeErrorOverlay","error","stack","overlay","createErrorOverlay","remove","stackTrace","innerText","getParents","modules","parents","k","d","dep","Array","isArray","Function","deps","cached","cache","some","cb"],"mappings":"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","file":"snake.7c14c01e.js","sourceRoot":"..","sourcesContent":["/*\nJavaScript Snake\nFirst version by Patrick Gillespie - I've since merged in a good number of github pull requests\nhttp://patorjk.com/games/snake \n*/\n\n/**\n * @module Snake\n * @class SNAKE\n */\n\nvar SNAKE = SNAKE || {};\nwindow.SNAKE = SNAKE; // this will allow us to access the game in other JS files when the app is loaded up in a codesandbox.com sandbox, that's the only reason it's here\n\nvar eventContainer;\nwindow.addEventListener(\n  \"message\",\n  (e) => {\n    console.log(e.data);\n    if (e.data.method === \"snake-game-control\") {\n      switch (e.data.control) {\n        case \"Left\":\n          eventContainer.dispatchEvent(\n            new KeyboardEvent(\"keydown\", { keyCode: 37 })\n          );\n          break;\n        case \"Right\":\n          eventContainer.dispatchEvent(\n            new KeyboardEvent(\"keydown\", { keyCode: 39 })\n          );\n          break;\n        case \"Up\":\n          eventContainer.dispatchEvent(\n            new KeyboardEvent(\"keydown\", { keyCode: 38 })\n          );\n          break;\n        case \"Down\":\n          eventContainer.dispatchEvent(\n            new KeyboardEvent(\"keydown\", { keyCode: 40 })\n          );\n          break;\n        case \"Start\":\n          const start = document.querySelector(\".snake-welcome-dialog\");\n          const restart = document.querySelector(\".snake-try-again-dialog\");\n\n          if (start.style.display !== \"none\") {\n            start.querySelector(\"button\").click();\n          } else if (restart.style.display !== \"none\") {\n            restart.querySelector(\"button\").click();\n          }\n          break;\n      }\n    } else if (e.data.theme) {\n      const theme = JSON.parse(e.data.theme);\n      const root = document.querySelector(\":root\");\n      root.style.setProperty(\"--backgroundBorder\", theme.outlineColor);\n      root.style.setProperty(\"--background\", theme.backgroundColor);\n      root.style.setProperty(\"--snake\", theme.themeColor1);\n      root.style.setProperty(\"--food\", theme.themeColor2);\n      root.style.setProperty(\"--textColor\", theme.titleColor);\n      root.style.setProperty(\"--dialogBackground\", theme.outlineColor);\n    }\n  },\n  false\n);\n\n/**\n * @method addEventListener\n * @param {Object} obj The object to add an event listener to.\n * @param {String} event The event to listen for.\n * @param {Function} funct The function to execute when the event is triggered.\n * @param {Boolean} evtCapturing True to do event capturing, false to do event bubbling.\n */\nSNAKE.addEventListener = (function () {\n  if (window.addEventListener) {\n    return function (obj, event, funct, evtCapturing) {\n      obj.addEventListener(event, funct, evtCapturing);\n    };\n  } else if (window.attachEvent) {\n    return function (obj, event, funct) {\n      obj.attachEvent(\"on\" + event, funct);\n    };\n  }\n})();\n\n/**\n * @method removeEventListener\n * @param {Object} obj The object to remove an event listener from.\n * @param {String} event The event that was listened for.\n * @param {Function} funct The function that was executed when the event is triggered.\n * @param {Boolean} evtCapturing True if event capturing was done, false otherwise.\n */\n\nSNAKE.removeEventListener = (function () {\n  if (window.removeEventListener) {\n    return function (obj, event, funct, evtCapturing) {\n      obj.removeEventListener(event, funct, evtCapturing);\n    };\n  } else if (window.detachEvent) {\n    return function (obj, event, funct) {\n      obj.detachEvent(\"on\" + event, funct);\n    };\n  }\n})();\n\n/**\n * This class manages the snake which will reside inside of a SNAKE.Board object.\n * @class Snake\n * @constructor\n * @namespace SNAKE\n * @param {Object} config The configuration object for the class. Contains playingBoard (the SNAKE.Board that this snake resides in), startRow and startCol.\n */\nSNAKE.Snake =\n  SNAKE.Snake ||\n  (function () {\n    // -------------------------------------------------------------------------\n    // Private static variables and methods\n    // -------------------------------------------------------------------------\n\n    var instanceNumber = 0;\n    var blockPool = [];\n\n    var SnakeBlock = function () {\n      this.elm = null;\n      this.elmStyle = null;\n      this.row = -1;\n      this.col = -1;\n      this.xPos = -1000;\n      this.yPos = -1000;\n      this.next = null;\n      this.prev = null;\n    };\n\n    // this function is adapted from the example at http://greengeckodesign.com/blog/2007/07/get-highest-z-index-in-javascript.html\n    function getNextHighestZIndex(myObj) {\n      var highestIndex = 0,\n        currentIndex = 0,\n        ii;\n      for (ii in myObj) {\n        if (myObj[ii].elm.currentStyle) {\n          currentIndex = parseFloat(myObj[ii].elm.style[\"z-index\"], 10);\n        } else if (window.getComputedStyle) {\n          currentIndex = parseFloat(\n            document.defaultView\n              .getComputedStyle(myObj[ii].elm, null)\n              .getPropertyValue(\"z-index\"),\n            10\n          );\n        }\n        if (!isNaN(currentIndex) && currentIndex > highestIndex) {\n          highestIndex = currentIndex;\n        }\n      }\n      return highestIndex + 1;\n    }\n\n    // -------------------------------------------------------------------------\n    // Contructor + public and private definitions\n    // -------------------------------------------------------------------------\n\n    /*\n        config options:\n            playingBoard - the SnakeBoard that this snake belongs too.\n            startRow - The row the snake should start on.\n            startCol - The column the snake should start on.\n    */\n    return function (config) {\n      if (!config || !config.playingBoard) {\n        return;\n      }\n      if (localStorage.jsSnakeHighScore === undefined)\n        localStorage.setItem(\"jsSnakeHighScore\", 0);\n\n      // ----- private variables -----\n\n      var me = this,\n        playingBoard = config.playingBoard,\n        myId = instanceNumber++,\n        growthIncr = 5,\n        lastMove = 1,\n        preMove = -1,\n        isFirstMove = true,\n        isFirstGameMove = true,\n        currentDirection = -1, // 0: up, 1: left, 2: down, 3: right\n        columnShift = [0, 1, 0, -1],\n        rowShift = [-1, 0, 1, 0],\n        xPosShift = [],\n        yPosShift = [],\n        snakeSpeed = 200,\n        isDead = false,\n        isPaused = false;\n\n      function setModeListener(mode, speed) {\n        document.getElementById(mode).addEventListener(\"click\", function () {\n          snakeSpeed = 200;\n        });\n      }\n\n      var modeDropdown = document.getElementById(\"selectMode\");\n      if (modeDropdown) {\n        modeDropdown.addEventListener(\"change\", function (evt) {\n          evt = evt || {};\n          var val = evt.target ? parseInt(evt.target.value) : 75;\n\n          if (isNaN(val)) {\n            val = 75;\n          } else if (val < 25) {\n            val = 75;\n          }\n\n          snakeSpeed = 200;\n\n          setTimeout(function () {\n            document.getElementById(\"game-area\").focus();\n          }, 10);\n        });\n      }\n\n      //setModeListener('Easy', 100);\n      //setModeListener('Medium', 75);\n      //setModeListener('Difficult', 50);\n\n      // ----- public variables -----\n      me.snakeBody = {};\n      me.snakeBody[\"b0\"] = new SnakeBlock(); // create snake head\n      me.snakeBody[\"b0\"].row = config.startRow || 1;\n      me.snakeBody[\"b0\"].col = config.startCol || 1;\n      me.snakeBody[\"b0\"].xPos =\n        me.snakeBody[\"b0\"].row * playingBoard.getBlockWidth();\n      me.snakeBody[\"b0\"].yPos =\n        me.snakeBody[\"b0\"].col * playingBoard.getBlockHeight();\n      me.snakeBody[\"b0\"].elm = createSnakeElement();\n      me.snakeBody[\"b0\"].elmStyle = me.snakeBody[\"b0\"].elm.style;\n      playingBoard.getBoardContainer().appendChild(me.snakeBody[\"b0\"].elm);\n      me.snakeBody[\"b0\"].elm.style.left = me.snakeBody[\"b0\"].xPos + \"px\";\n      me.snakeBody[\"b0\"].elm.style.top = me.snakeBody[\"b0\"].yPos + \"px\";\n      me.snakeBody[\"b0\"].next = me.snakeBody[\"b0\"];\n      me.snakeBody[\"b0\"].prev = me.snakeBody[\"b0\"];\n\n      me.snakeLength = 1;\n      me.snakeHead = me.snakeBody[\"b0\"];\n      me.snakeTail = me.snakeBody[\"b0\"];\n      me.snakeHead.elm.className = me.snakeHead.elm.className.replace(\n        /\\bsnake-snakebody-dead\\b/,\n        \"\"\n      );\n      me.snakeHead.elm.id = \"snake-snakehead-alive\";\n      me.snakeHead.elm.className += \" snake-snakebody-alive\";\n\n      // ----- private methods -----\n\n      function createSnakeElement() {\n        var tempNode = document.createElement(\"div\");\n        tempNode.className = \"snake-snakebody-block\";\n        tempNode.style.left = \"-1000px\";\n        tempNode.style.top = \"-1000px\";\n        tempNode.style.width = playingBoard.getBlockWidth() + \"px\";\n        tempNode.style.height = playingBoard.getBlockHeight() + \"px\";\n        return tempNode;\n      }\n\n      function createBlocks(num) {\n        var tempBlock;\n        var tempNode = createSnakeElement();\n\n        for (var ii = 1; ii < num; ii++) {\n          tempBlock = new SnakeBlock();\n          tempBlock.elm = tempNode.cloneNode(true);\n          tempBlock.elmStyle = tempBlock.elm.style;\n          playingBoard.getBoardContainer().appendChild(tempBlock.elm);\n          blockPool[blockPool.length] = tempBlock;\n        }\n\n        tempBlock = new SnakeBlock();\n        tempBlock.elm = tempNode;\n        playingBoard.getBoardContainer().appendChild(tempBlock.elm);\n        blockPool[blockPool.length] = tempBlock;\n      }\n\n      function recordScore() {\n        var highScore = localStorage.jsSnakeHighScore;\n        if (me.snakeLength > highScore) {\n          alert(\n            \"Congratulations! You have beaten your previous high score, which was \" +\n              highScore +\n              \".\"\n          );\n          localStorage.setItem(\"jsSnakeHighScore\", me.snakeLength);\n        }\n      }\n\n      function handleEndCondition(handleFunc) {\n        recordScore();\n        me.snakeHead.elm.style.zIndex = getNextHighestZIndex(me.snakeBody);\n        me.snakeHead.elm.className = me.snakeHead.elm.className.replace(\n          /\\bsnake-snakebody-alive\\b/,\n          \"\"\n        );\n        me.snakeHead.elm.className += \" snake-snakebody-dead\";\n\n        isDead = true;\n        handleFunc();\n      }\n\n      // ----- public methods -----\n\n      me.setPaused = function (val) {\n        isPaused = val;\n      };\n      me.getPaused = function () {\n        return isPaused;\n      };\n\n      /**\n       * This method is called when a user presses a key. It logs arrow key presses in \"currentDirection\", which is used when the snake needs to make its next move.\n       * @method handleArrowKeys\n       * @param {Number} keyNum A number representing the key that was pressed.\n       */\n      /*\n            Handles what happens when an arrow key is pressed.\n            Direction explained (0 = up, etc etc)\n                    0\n                  3   1\n                    2\n        */\n      me.handleArrowKeys = function (keyNum) {\n        if (isDead || (isPaused && !config.premoveOnPause)) {\n          return;\n        }\n\n        var snakeLength = me.snakeLength;\n\n        //console.log(\"lastmove=\"+lastMove);\n        //console.log(\"dir=\"+keyNum);\n\n        let directionFound = -1;\n\n        switch (keyNum) {\n          case 37:\n          case 65:\n            directionFound = 3;\n            break;\n          case 38:\n          case 87:\n            directionFound = 0;\n            break;\n          case 39:\n          case 68:\n            directionFound = 1;\n            break;\n          case 40:\n          case 83:\n            directionFound = 2;\n            break;\n        }\n        if (currentDirection !== lastMove) {\n          // Allow a queue of 1 premove so you can turn again before the first turn registers\n          preMove = directionFound;\n        }\n        if (\n          (Math.abs(directionFound - lastMove) !== 2 &&\n            (isFirstMove || isPaused)) ||\n          isFirstGameMove\n        ) {\n          // Prevent snake from turning 180 degrees\n          currentDirection = directionFound;\n          isFirstMove = false;\n          isFirstGameMove = false;\n        }\n      };\n\n      /**\n       * This method is executed for each move of the snake. It determines where the snake will go and what will happen to it. This method needs to run quickly.\n       * @method go\n       */\n      me.go = function () {\n        var oldHead = me.snakeHead,\n          newHead = me.snakeTail,\n          grid = playingBoard.grid; // cache grid for quicker lookup\n\n        if (isPaused === true) {\n          setTimeout(function () {\n            me.go();\n          }, snakeSpeed);\n          return;\n        }\n\n        me.snakeTail = newHead.prev;\n        me.snakeHead = newHead;\n\n        // clear the old board position\n        if (grid[newHead.row] && grid[newHead.row][newHead.col]) {\n          grid[newHead.row][newHead.col] = 0;\n        }\n\n        if (currentDirection !== -1) {\n          lastMove = currentDirection;\n          if (preMove !== -1) {\n            // If the user queued up another move after the current one\n            currentDirection = preMove; // Execute that move next time (unless overwritten)\n            preMove = -1;\n          }\n        }\n        isFirstMove = true;\n\n        newHead.col = oldHead.col + columnShift[lastMove];\n        newHead.row = oldHead.row + rowShift[lastMove];\n        newHead.xPos = oldHead.xPos + xPosShift[lastMove];\n        newHead.yPos = oldHead.yPos + yPosShift[lastMove];\n\n        if (!newHead.elmStyle) {\n          newHead.elmStyle = newHead.elm.style;\n        }\n\n        newHead.elmStyle.left = newHead.xPos + \"px\";\n        newHead.elmStyle.top = newHead.yPos + \"px\";\n        if (me.snakeLength > 1) {\n          newHead.elm.id = \"snake-snakehead-alive\";\n          oldHead.elm.id = \"\";\n        }\n\n        // check the new spot the snake moved into\n\n        if (grid[newHead.row][newHead.col] === 0) {\n          grid[newHead.row][newHead.col] = 1;\n          setTimeout(function () {\n            me.go();\n          }, snakeSpeed);\n        } else if (grid[newHead.row][newHead.col] > 0) {\n          me.handleDeath();\n        } else if (\n          grid[newHead.row][newHead.col] === playingBoard.getGridFoodValue()\n        ) {\n          grid[newHead.row][newHead.col] = 1;\n          if (!me.eatFood()) {\n            me.handleWin();\n            return;\n          }\n          setTimeout(function () {\n            me.go();\n          }, snakeSpeed);\n        }\n      };\n\n      /**\n       * This method is called when it is determined that the snake has eaten some food.\n       * @method eatFood\n       * @return {bool} Whether a new food was able to spawn (true)\n       *   or not (false) after the snake eats food.\n       */\n      me.eatFood = function () {\n        if (blockPool.length <= growthIncr) {\n          createBlocks(growthIncr * 2);\n        }\n        var blocks = blockPool.splice(0, growthIncr);\n\n        var ii = blocks.length,\n          index,\n          prevNode = me.snakeTail;\n        while (ii--) {\n          index = \"b\" + me.snakeLength++;\n          me.snakeBody[index] = blocks[ii];\n          me.snakeBody[index].prev = prevNode;\n          me.snakeBody[index].elm.className =\n            me.snakeHead.elm.className.replace(/\\bsnake-snakebody-dead\\b/, \"\");\n          me.snakeBody[index].elm.className += \" snake-snakebody-alive\";\n          prevNode.next = me.snakeBody[index];\n          prevNode = me.snakeBody[index];\n        }\n        me.snakeTail = me.snakeBody[index];\n        me.snakeTail.next = me.snakeHead;\n        me.snakeHead.prev = me.snakeTail;\n\n        if (!playingBoard.foodEaten()) {\n          return false;\n        }\n\n        //Checks if the current selected option is that of \"Rush\"\n        //If so, \"increase\" the snake speed\n        var selectDropDown = document.getElementById(\"selectMode\");\n        var selectedOption =\n          selectDropDown.options[selectDropDown.selectedIndex];\n\n        if (selectedOption.text.localeCompare(\"Rush\") == 0) {\n          // snakeSpeed > 30 ? (snakeSpeed -= 5) : (snakeSpeed = 30);\n          snakeSpeed = 200;\n        }\n\n        return true;\n      };\n\n      /**\n       * This method handles what happens when the snake dies.\n       * @method handleDeath\n       */\n      me.handleDeath = function () {\n        //Reset speed\n        var selectedSpeed = document.getElementById(\"selectMode\").value;\n        snakeSpeed = parseInt(200);\n\n        handleEndCondition(playingBoard.handleDeath);\n      };\n\n      /**\n       * This method handles what happens when the snake wins.\n       * @method handleDeath\n       */\n      me.handleWin = function () {\n        handleEndCondition(playingBoard.handleWin);\n      };\n\n      /**\n       * This method sets a flag that lets the snake be alive again.\n       * @method rebirth\n       */\n      me.rebirth = function () {\n        isDead = false;\n        isFirstMove = true;\n        isFirstGameMove = true;\n        preMove = -1;\n      };\n\n      /**\n       * This method reset the snake so it is ready for a new game.\n       * @method reset\n       */\n      me.reset = function () {\n        if (isDead === false) {\n          return;\n        }\n\n        var blocks = [],\n          curNode = me.snakeHead.next,\n          nextNode;\n        while (curNode !== me.snakeHead) {\n          nextNode = curNode.next;\n          curNode.prev = null;\n          curNode.next = null;\n          blocks.push(curNode);\n          curNode = nextNode;\n        }\n        me.snakeHead.next = me.snakeHead;\n        me.snakeHead.prev = me.snakeHead;\n        me.snakeTail = me.snakeHead;\n        me.snakeLength = 1;\n\n        for (var ii = 0; ii < blocks.length; ii++) {\n          blocks[ii].elm.style.left = \"-1000px\";\n          blocks[ii].elm.style.top = \"-1000px\";\n          blocks[ii].elm.className = me.snakeHead.elm.className.replace(\n            /\\bsnake-snakebody-dead\\b/,\n            \"\"\n          );\n          blocks[ii].elm.className += \" snake-snakebody-alive\";\n        }\n\n        blockPool.concat(blocks);\n        me.snakeHead.elm.className = me.snakeHead.elm.className.replace(\n          /\\bsnake-snakebody-dead\\b/,\n          \"\"\n        );\n        me.snakeHead.elm.className += \" snake-snakebody-alive\";\n        me.snakeHead.elm.id = \"snake-snakehead-alive\";\n        me.snakeHead.row = config.startRow || 1;\n        me.snakeHead.col = config.startCol || 1;\n        me.snakeHead.xPos = me.snakeHead.row * playingBoard.getBlockWidth();\n        me.snakeHead.yPos = me.snakeHead.col * playingBoard.getBlockHeight();\n        me.snakeHead.elm.style.left = me.snakeHead.xPos + \"px\";\n        me.snakeHead.elm.style.top = me.snakeHead.yPos + \"px\";\n      };\n\n      // ---------------------------------------------------------------------\n      // Initialize\n      // ---------------------------------------------------------------------\n      createBlocks(growthIncr * 2);\n      xPosShift[0] = 0;\n      xPosShift[1] = playingBoard.getBlockWidth();\n      xPosShift[2] = 0;\n      xPosShift[3] = -1 * playingBoard.getBlockWidth();\n\n      yPosShift[0] = -1 * playingBoard.getBlockHeight();\n      yPosShift[1] = 0;\n      yPosShift[2] = playingBoard.getBlockHeight();\n      yPosShift[3] = 0;\n    };\n  })();\n\n/**\n * This class manages the food which the snake will eat.\n * @class Food\n * @constructor\n * @namespace SNAKE\n * @param {Object} config The configuration object for the class. Contains playingBoard (the SNAKE.Board that this food resides in).\n */\n\nSNAKE.Food =\n  SNAKE.Food ||\n  (function () {\n    // -------------------------------------------------------------------------\n    // Private static variables and methods\n    // -------------------------------------------------------------------------\n\n    var instanceNumber = 0;\n\n    function getRandomPosition(x, y) {\n      return Math.floor(Math.random() * (y + 1 - x)) + x;\n    }\n\n    // -------------------------------------------------------------------------\n    // Contructor + public and private definitions\n    // -------------------------------------------------------------------------\n\n    /*\n        config options:\n            playingBoard - the SnakeBoard that this object belongs too.\n    */\n    return function (config) {\n      if (!config || !config.playingBoard) {\n        return;\n      }\n\n      // ----- private variables -----\n\n      var me = this;\n      var playingBoard = config.playingBoard;\n      var fRow, fColumn;\n      var myId = instanceNumber++;\n\n      var elmFood = document.createElement(\"div\");\n      elmFood.setAttribute(\"id\", \"snake-food-\" + myId);\n      elmFood.className = \"snake-food-block\";\n      elmFood.style.width = playingBoard.getBlockWidth() + \"px\";\n      elmFood.style.height = playingBoard.getBlockHeight() + \"px\";\n      elmFood.style.left = \"-1000px\";\n      elmFood.style.top = \"-1000px\";\n      playingBoard.getBoardContainer().appendChild(elmFood);\n\n      // ----- public methods -----\n\n      /**\n       * @method getFoodElement\n       * @return {DOM Element} The div the represents the food.\n       */\n      me.getFoodElement = function () {\n        return elmFood;\n      };\n\n      /**\n       * Randomly places the food onto an available location on the playing board.\n       * @method randomlyPlaceFood\n       * @return {bool} Whether a food was able to spawn (true) or not (false).\n       */\n      me.randomlyPlaceFood = function () {\n        // if there exist some food, clear its presence from the board\n        if (\n          playingBoard.grid[fRow] &&\n          playingBoard.grid[fRow][fColumn] === playingBoard.getGridFoodValue()\n        ) {\n          playingBoard.grid[fRow][fColumn] = 0;\n        }\n\n        var row = 0,\n          col = 0,\n          numTries = 0;\n\n        var maxRows = playingBoard.grid.length - 1;\n        var maxCols = playingBoard.grid[0].length - 1;\n\n        while (playingBoard.grid[row][col] !== 0) {\n          row = getRandomPosition(1, maxRows);\n          col = getRandomPosition(1, maxCols);\n\n          // in some cases there may not be any room to put food anywhere\n          // instead of freezing, exit out (and return false to indicate\n          // that the player beat the game)\n          numTries++;\n          if (numTries > 20000) {\n            return false;\n          }\n        }\n\n        playingBoard.grid[row][col] = playingBoard.getGridFoodValue();\n        fRow = row;\n        fColumn = col;\n        elmFood.style.top = row * playingBoard.getBlockHeight() + \"px\";\n        elmFood.style.left = col * playingBoard.getBlockWidth() + \"px\";\n        return true;\n      };\n    };\n  })();\n\n/**\n * This class manages playing board for the game.\n * @class Board\n * @constructor\n * @namespace SNAKE\n * @param {Object} config The configuration object for the class. Set fullScreen equal to true if you want the game to take up the full screen, otherwise, set the top, left, width and height parameters.\n */\n\nSNAKE.Board =\n  SNAKE.Board ||\n  (function () {\n    // -------------------------------------------------------------------------\n    // Private static variables and methods\n    // -------------------------------------------------------------------------\n\n    var instanceNumber = 0;\n\n    // this function is adapted from the example at http://greengeckodesign.com/blog/2007/07/get-highest-z-index-in-javascript.html\n    function getNextHighestZIndex(myObj) {\n      var highestIndex = 0,\n        currentIndex = 0,\n        ii;\n      for (ii in myObj) {\n        if (myObj[ii].elm.currentStyle) {\n          currentIndex = parseFloat(myObj[ii].elm.style[\"z-index\"], 10);\n        } else if (window.getComputedStyle) {\n          currentIndex = parseFloat(\n            document.defaultView\n              .getComputedStyle(myObj[ii].elm, null)\n              .getPropertyValue(\"z-index\"),\n            10\n          );\n        }\n        if (!isNaN(currentIndex) && currentIndex > highestIndex) {\n          highestIndex = currentIndex;\n        }\n      }\n      return highestIndex + 1;\n    }\n\n    /*\n        This function returns the width of the available screen real estate that we have\n    */\n    function getClientWidth() {\n      var myWidth = 0;\n      if (typeof window.innerWidth === \"number\") {\n        myWidth = window.innerWidth; //Non-IE\n      } else if (\n        document.documentElement &&\n        (document.documentElement.clientWidth ||\n          document.documentElement.clientHeight)\n      ) {\n        myWidth = document.documentElement.clientWidth; //IE 6+ in 'standards compliant mode'\n      } else if (\n        document.body &&\n        (document.body.clientWidth || document.body.clientHeight)\n      ) {\n        myWidth = document.body.clientWidth; //IE 4 compatible\n      }\n      return myWidth;\n    }\n    /*\n        This function returns the height of the available screen real estate that we have\n    */\n    function getClientHeight() {\n      var myHeight = 0;\n      if (typeof window.innerHeight === \"number\") {\n        myHeight = window.innerHeight; //Non-IE\n      } else if (\n        document.documentElement &&\n        (document.documentElement.clientWidth ||\n          document.documentElement.clientHeight)\n      ) {\n        myHeight = document.documentElement.clientHeight; //IE 6+ in 'standards compliant mode'\n      } else if (\n        document.body &&\n        (document.body.clientWidth || document.body.clientHeight)\n      ) {\n        myHeight = document.body.clientHeight; //IE 4 compatible\n      }\n      return myHeight;\n    }\n\n    // -------------------------------------------------------------------------\n    // Contructor + public and private definitions\n    // -------------------------------------------------------------------------\n\n    return function (inputConfig) {\n      // --- private variables ---\n      var me = this,\n        myId = instanceNumber++,\n        config = inputConfig || {},\n        MAX_BOARD_COLS = 250,\n        MAX_BOARD_ROWS = 250,\n        blockWidth = 20,\n        blockHeight = 20,\n        GRID_FOOD_VALUE = -1, // the value of a spot on the board that represents snake food, MUST BE NEGATIVE\n        myFood,\n        mySnake,\n        boardState = 1, // 0: in active; 1: awaiting game start; 2: playing game\n        myKeyListener,\n        isPaused = false, //note: both the board and the snake can be paused\n        // Board components\n        elmContainer,\n        elmPlayingField,\n        elmAboutPanel,\n        elmLengthPanel,\n        elmHighscorePanel,\n        elmWelcome,\n        elmTryAgain,\n        elmWin,\n        elmPauseScreen;\n\n      // --- public variables ---\n      me.grid = [];\n\n      // ---------------------------------------------------------------------\n      // private functions\n      // ---------------------------------------------------------------------\n\n      function createBoardElements() {\n        elmPlayingField = document.createElement(\"div\");\n        elmPlayingField.setAttribute(\"id\", \"playingField\");\n        elmPlayingField.className = \"snake-playing-field\";\n\n        SNAKE.addEventListener(\n          elmPlayingField,\n          \"click\",\n          function () {\n            elmContainer.focus();\n          },\n          false\n        );\n\n        elmPauseScreen = document.createElement(\"div\");\n        elmPauseScreen.className = \"snake-pause-screen\";\n        elmPauseScreen.innerHTML =\n          \"<div style='padding:10px;'>[Paused]<p/>Press [space] to unpause.</div>\";\n\n        elmAboutPanel = document.createElement(\"div\");\n        elmAboutPanel.className = \"snake-panel-component\";\n        elmAboutPanel.innerHTML =\n          \"<a href='http://patorjk.com/blog/software/' class='snake-link'>more patorjk.com apps</a> - <a href='https://github.com/patorjk/JavaScript-Snake' class='snake-link'>source code</a> - <a href='https://www.youtube.com/channel/UCpcCLm9y6CsjHUrCvJHYHUA' class='snake-link'>pat's youtube</a>\";\n\n        elmLengthPanel = document.createElement(\"div\");\n        elmLengthPanel.className = \"snake-panel-component\";\n        elmLengthPanel.innerHTML = \"Length: 1\";\n\n        elmHighscorePanel = document.createElement(\"div\");\n        elmHighscorePanel.className = \"snake-panel-component\";\n        elmHighscorePanel.innerHTML =\n          \"Highscore: \" + (localStorage.jsSnakeHighScore || 0);\n\n        elmWelcome = createWelcomeElement();\n        elmTryAgain = createTryAgainElement();\n        elmWin = createWinElement();\n\n        SNAKE.addEventListener(\n          elmContainer,\n          \"keyup\",\n          function (evt) {\n            if (!evt) var evt = window.event;\n            evt.cancelBubble = true;\n            if (evt.stopPropagation) {\n              evt.stopPropagation();\n            }\n            if (evt.preventDefault) {\n              evt.preventDefault();\n            }\n            return false;\n          },\n          false\n        );\n\n        elmContainer.className = \"snake-game-container\";\n\n        elmPauseScreen.style.zIndex = 10000;\n        elmContainer.appendChild(elmPauseScreen);\n        elmContainer.appendChild(elmPlayingField);\n        // elmContainer.appendChild(elmAboutPanel);\n        elmContainer.appendChild(elmLengthPanel);\n        elmContainer.appendChild(elmHighscorePanel);\n        elmContainer.appendChild(elmWelcome);\n        elmContainer.appendChild(elmTryAgain);\n        elmContainer.appendChild(elmWin);\n\n        mySnake = new SNAKE.Snake({\n          playingBoard: me,\n          startRow: 2,\n          startCol: 2,\n          premoveOnPause: config.premoveOnPause,\n        });\n        myFood = new SNAKE.Food({ playingBoard: me });\n\n        elmWelcome.style.zIndex = 1000;\n      }\n      function maxBoardWidth() {\n        return MAX_BOARD_COLS * me.getBlockWidth();\n      }\n      function maxBoardHeight() {\n        return MAX_BOARD_ROWS * me.getBlockHeight();\n      }\n\n      function createWelcomeElement() {\n        var tmpElm = document.createElement(\"div\");\n        tmpElm.id = \"sbWelcome\" + myId;\n        tmpElm.className = \"snake-welcome-dialog\";\n\n        var welcomeTxt = document.createElement(\"div\");\n        var fullScreenText = \"\";\n        if (config.fullScreen) {\n          fullScreenText = \"On Windows, press F11 to play in Full Screen mode.\";\n        }\n        welcomeTxt.innerHTML =\n          \"JavaScript Snake<p></p>Use the <strong>arrow keys</strong> on your keyboard to play the game. \" +\n          fullScreenText +\n          \"<p></p>\";\n        var welcomeStart = document.createElement(\"button\");\n        welcomeStart.appendChild(document.createTextNode(\"Play Game\"));\n        var loadGame = function () {\n          SNAKE.removeEventListener(window, \"keyup\", kbShortcut, false);\n          tmpElm.style.display = \"none\";\n          me.setBoardState(1);\n          me.getBoardContainer().focus();\n        };\n\n        var kbShortcut = function (evt) {\n          if (!evt) var evt = window.event;\n          var keyNum = evt.which ? evt.which : evt.keyCode;\n          if (keyNum === 32 || keyNum === 13) {\n            loadGame();\n          }\n        };\n        SNAKE.addEventListener(window, \"keyup\", kbShortcut, false);\n        SNAKE.addEventListener(welcomeStart, \"click\", loadGame, false);\n\n        tmpElm.appendChild(welcomeTxt);\n        tmpElm.appendChild(welcomeStart);\n        return tmpElm;\n      }\n\n      function createGameEndElement(message, elmId, elmClassName) {\n        var tmpElm = document.createElement(\"div\");\n        tmpElm.id = elmId + myId;\n        tmpElm.className = elmClassName;\n\n        var gameEndTxt = document.createElement(\"div\");\n        gameEndTxt.innerHTML = \"JavaScript Snake<p></p>\" + message + \"<p></p>\";\n        var gameEndStart = document.createElement(\"button\");\n        gameEndStart.appendChild(document.createTextNode(\"Play Again?\"));\n\n        var reloadGame = function () {\n          tmpElm.style.display = \"none\";\n          me.resetBoard();\n          me.setBoardState(1);\n          me.getBoardContainer().focus();\n        };\n\n        var kbGameEndShortcut = function (evt) {\n          if (boardState !== 0 || tmpElm.style.display !== \"block\") {\n            return;\n          }\n          if (!evt) var evt = window.event;\n          var keyNum = evt.which ? evt.which : evt.keyCode;\n          if (keyNum === 32 || keyNum === 13) {\n            reloadGame();\n          }\n        };\n        SNAKE.addEventListener(window, \"keyup\", kbGameEndShortcut, true);\n\n        SNAKE.addEventListener(gameEndStart, \"click\", reloadGame, false);\n        tmpElm.appendChild(gameEndTxt);\n        tmpElm.appendChild(gameEndStart);\n        return tmpElm;\n      }\n\n      function createTryAgainElement() {\n        return createGameEndElement(\n          \"You died :(\",\n          \"sbTryAgain\",\n          \"snake-try-again-dialog\"\n        );\n      }\n\n      function createWinElement() {\n        return createGameEndElement(\"You win! :D\", \"sbWin\", \"snake-win-dialog\");\n      }\n\n      function handleEndCondition(elmDialog) {\n        var index = Math.max(\n          getNextHighestZIndex(mySnake.snakeBody),\n          getNextHighestZIndex({ tmp: { elm: myFood.getFoodElement() } })\n        );\n        elmContainer.removeChild(elmDialog);\n        elmContainer.appendChild(elmDialog);\n        elmDialog.style.zIndex = index;\n        elmDialog.style.display = \"block\";\n        me.setBoardState(0);\n      }\n\n      // ---------------------------------------------------------------------\n      // public functions\n      // ---------------------------------------------------------------------\n\n      me.setPaused = function (val) {\n        isPaused = val;\n        mySnake.setPaused(val);\n        if (isPaused) {\n          elmPauseScreen.style.display = \"block\";\n        } else {\n          elmPauseScreen.style.display = \"none\";\n        }\n      };\n      me.getPaused = function () {\n        return isPaused;\n      };\n\n      /**\n       * Resets the playing board for a new game.\n       * @method resetBoard\n       */\n      me.resetBoard = function () {\n        SNAKE.removeEventListener(\n          elmContainer,\n          \"keydown\",\n          myKeyListener,\n          false\n        );\n        mySnake.reset();\n        elmLengthPanel.innerHTML = \"Length: 1\";\n        me.setupPlayingField();\n      };\n      /**\n       * Gets the current state of the playing board. There are 3 states: 0 - Welcome or Try Again dialog is present. 1 - User has pressed \"Start Game\" on the Welcome or Try Again dialog but has not pressed an arrow key to move the snake. 2 - The game is in progress and the snake is moving.\n       * @method getBoardState\n       * @return {Number} The state of the board.\n       */\n      me.getBoardState = function () {\n        return boardState;\n      };\n      /**\n       * Sets the current state of the playing board. There are 3 states: 0 - Welcome or Try Again dialog is present. 1 - User has pressed \"Start Game\" on the Welcome or Try Again dialog but has not pressed an arrow key to move the snake. 2 - The game is in progress and the snake is moving.\n       * @method setBoardState\n       * @param {Number} state The state of the board.\n       */\n      me.setBoardState = function (state) {\n        boardState = state;\n      };\n      /**\n       * @method getGridFoodValue\n       * @return {Number} A number that represents food on a number representation of the playing board.\n       */\n      me.getGridFoodValue = function () {\n        return GRID_FOOD_VALUE;\n      };\n      /**\n       * @method getPlayingFieldElement\n       * @return {DOM Element} The div representing the playing field (this is where the snake can move).\n       */\n      me.getPlayingFieldElement = function () {\n        return elmPlayingField;\n      };\n      /**\n       * @method setBoardContainer\n       * @param {DOM Element or String} myContainer Sets the container element for the game.\n       */\n      me.setBoardContainer = function (myContainer) {\n        if (typeof myContainer === \"string\") {\n          myContainer = document.getElementById(myContainer);\n        }\n        if (myContainer === elmContainer) {\n          return;\n        }\n        elmContainer = myContainer;\n        eventContainer = elmContainer;\n        elmPlayingField = null;\n\n        me.setupPlayingField();\n      };\n      /**\n       * @method getBoardContainer\n       * @return {DOM Element}\n       */\n      me.getBoardContainer = function () {\n        return elmContainer;\n      };\n      /**\n       * @method getBlockWidth\n       * @return {Number}\n       */\n      me.getBlockWidth = function () {\n        return blockWidth;\n      };\n      /**\n       * @method getBlockHeight\n       * @return {Number}\n       */\n      me.getBlockHeight = function () {\n        return blockHeight;\n      };\n      /**\n       * Sets up the playing field.\n       * @method setupPlayingField\n       */\n      me.setupPlayingField = function () {\n        if (!elmPlayingField) {\n          createBoardElements();\n        } // create playing field\n\n        // calculate width of our game container\n        var cWidth, cHeight;\n        var cTop, cLeft;\n        if (config.fullScreen === true) {\n          cTop = 0;\n          cLeft = 0;\n          cWidth = getClientWidth() - 20;\n          cHeight = getClientHeight() - 20;\n        } else {\n          cTop = config.top;\n          cLeft = config.left;\n          cWidth = config.width;\n          cHeight = config.height;\n        }\n\n        // define the dimensions of the board and playing field\n        var wEdgeSpace = me.getBlockWidth() * 2 + (cWidth % me.getBlockWidth());\n        var fWidth = Math.min(\n          maxBoardWidth() - wEdgeSpace,\n          cWidth - wEdgeSpace\n        );\n        var hEdgeSpace =\n          me.getBlockHeight() * 3 + (cHeight % me.getBlockHeight());\n        var fHeight = Math.min(\n          maxBoardHeight() - hEdgeSpace,\n          cHeight - hEdgeSpace\n        );\n\n        elmContainer.style.left = cLeft + \"px\";\n        elmContainer.style.top = cTop + \"px\";\n        elmContainer.style.width = cWidth + \"px\";\n        elmContainer.style.height = cHeight + \"px\";\n        elmPlayingField.style.left = me.getBlockWidth() + \"px\";\n        elmPlayingField.style.top = me.getBlockHeight() + \"px\";\n        elmPlayingField.style.width = fWidth + \"px\";\n        elmPlayingField.style.height = fHeight + \"px\";\n\n        // the math for this will need to change depending on font size, padding, etc\n        // assuming height of 14 (font size) + 8 (padding)\n        var bottomPanelHeight = hEdgeSpace - me.getBlockHeight();\n        var pLabelTop =\n          me.getBlockHeight() +\n          fHeight +\n          Math.round((bottomPanelHeight - 30) / 2) +\n          \"px\";\n\n        elmAboutPanel.style.top = pLabelTop;\n        elmAboutPanel.style.width = \"450px\";\n        elmAboutPanel.style.left =\n          Math.round(cWidth / 2) - Math.round(450 / 2) + \"px\";\n\n        elmLengthPanel.style.top = pLabelTop;\n        elmLengthPanel.style.left = 30 + \"px\";\n\n        elmHighscorePanel.style.top = pLabelTop;\n        elmHighscorePanel.style.left = cWidth - 140 + \"px\";\n\n        // if width is too narrow, hide the about panel\n        if (cWidth < 700) {\n          elmAboutPanel.style.display = \"none\";\n        } else {\n          elmAboutPanel.style.display = \"block\";\n        }\n\n        me.grid = [];\n        var numBoardCols = fWidth / me.getBlockWidth() + 2;\n        var numBoardRows = fHeight / me.getBlockHeight() + 2;\n\n        for (var row = 0; row < numBoardRows; row++) {\n          me.grid[row] = [];\n          for (var col = 0; col < numBoardCols; col++) {\n            if (\n              col === 0 ||\n              row === 0 ||\n              col === numBoardCols - 1 ||\n              row === numBoardRows - 1\n            ) {\n              me.grid[row][col] = 1; // an edge\n            } else {\n              me.grid[row][col] = 0; // empty space\n            }\n          }\n        }\n\n        myFood.randomlyPlaceFood();\n\n        myKeyListener = function (evt) {\n          if (!evt) var evt = window.event;\n          var keyNum = evt.which ? evt.which : evt.keyCode;\n\n          if (me.getBoardState() === 1) {\n            if (\n              !(keyNum >= 37 && keyNum <= 40) &&\n              !(\n                keyNum === 87 ||\n                keyNum === 65 ||\n                keyNum === 83 ||\n                keyNum === 68\n              )\n            ) {\n              return;\n            } // if not an arrow key, leave\n\n            // This removes the listener added at the #listenerX line\n            SNAKE.removeEventListener(\n              elmContainer,\n              \"keydown\",\n              myKeyListener,\n              false\n            );\n\n            myKeyListener = function (evt) {\n              if (!evt) var evt = window.event;\n              var keyNum = evt.which ? evt.which : evt.keyCode;\n\n              //console.log(keyNum);\n              if (keyNum === 32) {\n                if (me.getBoardState() != 0) me.setPaused(!me.getPaused());\n              }\n\n              mySnake.handleArrowKeys(keyNum);\n\n              evt.cancelBubble = true;\n              if (evt.stopPropagation) {\n                evt.stopPropagation();\n              }\n              if (evt.preventDefault) {\n                evt.preventDefault();\n              }\n              return false;\n            };\n            SNAKE.addEventListener(\n              elmContainer,\n              \"keydown\",\n              myKeyListener,\n              false\n            );\n\n            mySnake.rebirth();\n            mySnake.handleArrowKeys(keyNum);\n            me.setBoardState(2); // start the game!\n            mySnake.go();\n          }\n\n          evt.cancelBubble = true;\n          if (evt.stopPropagation) {\n            evt.stopPropagation();\n          }\n          if (evt.preventDefault) {\n            evt.preventDefault();\n          }\n          return false;\n        };\n\n        // Search for #listenerX to see where this is removed\n        SNAKE.addEventListener(elmContainer, \"keydown\", myKeyListener, false);\n      };\n\n      /**\n       * This method is called when the snake has eaten some food.\n       * @method foodEaten\n       * @return {bool} Whether a new food was able to spawn (true)\n       *   or not (false) after the snake eats food.\n       */\n      me.foodEaten = function () {\n        elmLengthPanel.innerHTML = \"Length: \" + mySnake.snakeLength;\n        if (mySnake.snakeLength > localStorage.jsSnakeHighScore) {\n          localStorage.setItem(\"jsSnakeHighScore\", mySnake.snakeLength);\n          elmHighscorePanel.innerHTML =\n            \"Highscore: \" + localStorage.jsSnakeHighScore;\n        }\n        if (!myFood.randomlyPlaceFood()) {\n          return false;\n        }\n        return true;\n      };\n\n      /**\n       * This method is called when the snake dies.\n       * @method handleDeath\n       */\n      me.handleDeath = function () {\n        handleEndCondition(elmTryAgain);\n      };\n\n      /**\n       * This method is called when the snake wins.\n       * @method handleWin\n       */\n      me.handleWin = function () {\n        handleEndCondition(elmWin);\n      };\n\n      // ---------------------------------------------------------------------\n      // Initialize\n      // ---------------------------------------------------------------------\n\n      config.fullScreen =\n        typeof config.fullScreen === \"undefined\" ? false : config.fullScreen;\n      config.top = typeof config.top === \"undefined\" ? 0 : config.top;\n      config.left = typeof config.left === \"undefined\" ? 0 : config.left;\n      config.width = typeof config.width === \"undefined\" ? 400 : config.width;\n      config.height =\n        typeof config.height === \"undefined\" ? 400 : config.height;\n      config.premoveOnPause =\n        typeof config.premoveOnPause === \"undefined\"\n          ? false\n          : config.premoveOnPause;\n\n      if (config.fullScreen) {\n        SNAKE.addEventListener(\n          window,\n          \"resize\",\n          function () {\n            me.setupPlayingField();\n          },\n          false\n        );\n      }\n\n      me.setBoardState(0);\n\n      if (config.boardContainer) {\n        me.setBoardContainer(config.boardContainer);\n      }\n    }; // end return function\n  })();\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel] ✨ Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel] 🚨  ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\">🚨</span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}